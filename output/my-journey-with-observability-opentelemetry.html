<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" type="text/css" href="/theme/css/elegant.prod.9e9d5ce754.css" media="screen">
        <link rel="stylesheet" type="text/css" href="/theme/css/custom.css" media="screen">

        <link rel="dns-prefetch" href="//fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin>

        <meta name="author" content="kienlt" />

        <meta property="og:type" content="article" />
        <meta name="twitter:card" content="summary">

<meta name="keywords" content="observability, Knowledge Base, " />

<meta property="og:title" content="My journey with observability: Opentelemetry "/>
<meta property="og:url" content="/my-journey-with-observability-opentelemetry.html" />
<meta property="og:description" content="" />
<meta property="og:site_name" content="Kienlt&#39;s notebook" />
<meta property="og:article:author" content="kienlt" />
<meta property="og:article:published_time" content="2025-03-03T00:00:00+07:00" />
<meta name="twitter:title" content="My journey with observability: Opentelemetry ">
<meta name="twitter:description" content="">

        <title>My journey with observability: Opentelemetry  Â· Kienlt&#39;s notebook
</title>



    </head>
    <body>
        <div id="content">
            <div class="navbar navbar-static-top">
                <div class="navbar-inner">
                    <div class="container-fluid">
                        <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </a>
                        <a class="brand" href="/"><span class=site-name>Kienlt's notebook</span></a>
                        <div class="nav-collapse collapse">
                            <ul class="nav pull-right top-menu">
                                <li >
                                    <a href=
                                       "/"
                                    >Home</a>
                                </li>
                                <li ><a href="/categories.html">Categories</a></li>
                                <li ><a href="/tags.html">Tags</a></li>
                                <li ><a href="/archives.html">Archives</a></li>
                                <li><form class="navbar-search" action="/search.html" onsubmit="return validateForm(this.elements['q'].value);"> <input type="text" class="search-query" placeholder="Search" name="q" id="tipue_search_input"></form></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="container-fluid">
                <div class="row-fluid">
                    <div class="span1"></div>
                    <div class="span10">
<article itemscope>
<div class="row-fluid">
    <header class="page-header span10 offset2">
        <h1>
            <a href="/my-journey-with-observability-opentelemetry.html">
                My journey with observability: Opentelemetry
            </a>
        </h1>
    </header>
</div>

<div class="row-fluid">
        <div class="span8 offset2 article-content">
            
            <h1>Introduction to Observability</h1>
<p>It has 3 pillar we need to know in my knowledge:</p>
<ul>
<li>Metrics</li>
<li>Logs</li>
<li>Traces</li>
</ul>
<p>So we will talk about Tracing in this article and it will come with OpenTelemetry(OTel)</p>
<h1>What is Open Telemetry (OTel)</h1>
<p>It is an observability framework for generating, collecting, and exporting telemetry data such as traces, metrics, and logs. But i will talk only about traces in this article. Metrics and Logs will be introduced in another article with some following information:</p>
<ul>
<li>Metrics: Response time, request volume, ingress success rate, status... via Prometheus standard.</li>
<li>Logs: Application send log to stdout and save those logs for debugging in Elasticsearch, VictoriaLogs with Fluentbit in K8S...</li>
</ul>
<p>Although OTel supports all of them but i will use only using traces for a demo right now xD</p>
<h1>Let's get started with a sample Go project with OTel</h1>
<h3>Setup quick OTel collector and Jaeger which can be considered as a backend in Localhost</h3>
<ul>
<li>
<p>Flows: 
<img alt="Work Flows" src="images/2025/03/03rd_1.png"></p>
</li>
<li>
<p>Docker compose script:</p>
</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="nt">services</span><span class="p">:</span>
<span class="w">  </span><span class="nt">otel-collector</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">otel/opentelemetry-collector-contrib:0.120.0</span>
<span class="w">    </span><span class="nt">command</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;--config=/etc/otel-collector-config.yaml&quot;</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="nt">volumes</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">./otel-collector-config.yaml:/etc/otel-collector-config.yaml</span>
<span class="w">    </span><span class="nt">ports</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;4317:4317&quot;</span><span class="w">   </span><span class="c1"># OTLP gRPC</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;4318:4318&quot;</span><span class="w">   </span><span class="c1"># OTLP HTTP</span>
<span class="w">    </span><span class="nt">networks</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">otel-network</span>

<span class="w">  </span><span class="nt">jaeger</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">jaegertracing/all-in-one:1.66.0</span>
<span class="w">    </span><span class="nt">ports</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;16686:16686&quot;</span><span class="w">   </span><span class="c1"># Jaeger UI</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;14250:14250&quot;</span><span class="w">   </span><span class="c1"># Receiver for otel-collector</span>
<span class="w">    </span><span class="nt">environment</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">COLLECTOR_OTLP_ENABLED=true</span>
<span class="w">    </span><span class="nt">networks</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">otel-network</span>
<span class="nt">networks</span><span class="p">:</span>
<span class="w">  </span><span class="nt">otel-network</span><span class="p">:</span>
</code></pre></div>

<ul>
<li>Otel config file <code>otel-collector-config.yaml</code>:</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="nt">receivers</span><span class="p">:</span>
<span class="w">  </span><span class="nt">otlp</span><span class="p">:</span>
<span class="w">    </span><span class="nt">protocols</span><span class="p">:</span>
<span class="w">      </span><span class="nt">grpc</span><span class="p">:</span>
<span class="w">        </span><span class="nt">endpoint</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.0.0.0:4317</span>
<span class="w">      </span><span class="nt">http</span><span class="p">:</span>
<span class="w">        </span><span class="nt">endpoint</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.0.0.0:4318</span>

<span class="nt">processors</span><span class="p">:</span>
<span class="w">  </span><span class="nt">batch</span><span class="p">:</span>
<span class="w">    </span><span class="nt">timeout</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1s</span>
<span class="w">    </span><span class="nt">send_batch_size</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1024</span>
<span class="w">  </span><span class="nt">memory_limiter</span><span class="p">:</span>
<span class="w">    </span><span class="nt">check_interval</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1s</span>
<span class="w">    </span><span class="nt">limit_mib</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1000</span>

<span class="nt">exporters</span><span class="p">:</span>
<span class="w">  </span><span class="nt">debug</span><span class="p">:</span>
<span class="w">    </span><span class="nt">verbosity</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">detailed</span>
<span class="w">  </span><span class="nt">otlp</span><span class="p">:</span>
<span class="w">    </span><span class="nt">endpoint</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">jaeger:4317</span>
<span class="w">    </span><span class="nt">tls</span><span class="p">:</span>
<span class="w">      </span><span class="nt">insecure</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>

<span class="nt">service</span><span class="p">:</span>
<span class="w">  </span><span class="nt">pipelines</span><span class="p">:</span>
<span class="w">    </span><span class="nt">traces</span><span class="p">:</span>
<span class="w">      </span><span class="nt">receivers</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">otlp</span><span class="p p-Indicator">]</span>
<span class="w">      </span><span class="nt">processors</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">memory_limiter</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">batch</span><span class="p p-Indicator">]</span>
<span class="w">      </span><span class="nt">exporters</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">otlp</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">debug</span><span class="p p-Indicator">]</span>
</code></pre></div>

<ul>
<li>Docker ps output after <code>docker compose up</code></li>
</ul>
<div class="highlight"><pre><span></span><code><span class="n">CONTAINER</span><span class="w"> </span><span class="n">ID</span><span class="w">   </span><span class="nc">IMAGE</span><span class="w">                                          </span><span class="n">COMMAND</span><span class="w">                  </span><span class="n">CREATED</span><span class="w">       </span><span class="n">STATUS</span><span class="w">              </span><span class="n">PORTS</span><span class="w">                                                                                                                                  </span><span class="k">NAMES</span>
<span class="n">d0138238848c</span><span class="w">   </span><span class="n">jaegertracing</span><span class="o">/</span><span class="ow">all</span><span class="o">-</span><span class="ow">in</span><span class="o">-</span><span class="nl">one</span><span class="p">:</span><span class="mf">1.66.0</span><span class="w">                </span><span class="ss">&quot;/go/bin/all-in-one-â¦&quot;</span><span class="w">   </span><span class="mi">2</span><span class="w"> </span><span class="n">days</span><span class="w"> </span><span class="n">ago</span><span class="w">    </span><span class="n">Up</span><span class="w"> </span><span class="mi">7</span><span class="w"> </span><span class="n">hours</span><span class="w">          </span><span class="mi">4317</span><span class="o">-</span><span class="mi">4318</span><span class="o">/</span><span class="n">tcp</span><span class="p">,</span><span class="w"> </span><span class="mi">9411</span><span class="o">/</span><span class="n">tcp</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0.0.0</span><span class="err">:</span><span class="mi">14250</span><span class="o">-&gt;</span><span class="mi">14250</span><span class="o">/</span><span class="n">tcp</span><span class="p">,</span><span class="w"> </span><span class="o">[</span><span class="n">::</span><span class="o">]</span><span class="err">:</span><span class="mi">14250</span><span class="o">-&gt;</span><span class="mi">14250</span><span class="o">/</span><span class="n">tcp</span><span class="p">,</span><span class="w"> </span><span class="mi">14268</span><span class="o">/</span><span class="n">tcp</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0.0.0</span><span class="err">:</span><span class="mi">16686</span><span class="o">-&gt;</span><span class="mi">16686</span><span class="o">/</span><span class="n">tcp</span><span class="p">,</span><span class="w"> </span><span class="o">[</span><span class="n">::</span><span class="o">]</span><span class="err">:</span><span class="mi">16686</span><span class="o">-&gt;</span><span class="mi">16686</span><span class="o">/</span><span class="n">tcp</span><span class="w">   </span><span class="n">opentelemetry</span><span class="o">-</span><span class="k">go</span><span class="o">-</span><span class="n">app</span><span class="o">-</span><span class="n">jaeger</span><span class="o">-</span><span class="mi">1</span>
<span class="mi">3466</span><span class="n">baff1cb6</span><span class="w">   </span><span class="n">otel</span><span class="o">/</span><span class="n">opentelemetry</span><span class="o">-</span><span class="n">collector</span><span class="o">-</span><span class="nl">contrib</span><span class="p">:</span><span class="mf">0.120.0</span><span class="w">   </span><span class="ss">&quot;/otelcol-contrib --â¦&quot;</span><span class="w">   </span><span class="mi">2</span><span class="w"> </span><span class="n">days</span><span class="w"> </span><span class="n">ago</span><span class="w">    </span><span class="n">Up</span><span class="w"> </span><span class="mi">7</span><span class="w"> </span><span class="n">hours</span><span class="w">          </span><span class="mf">0.0.0.0</span><span class="err">:</span><span class="mi">4317</span><span class="o">-</span><span class="mi">4318</span><span class="o">-&gt;</span><span class="mi">4317</span><span class="o">-</span><span class="mi">4318</span><span class="o">/</span><span class="n">tcp</span><span class="p">,</span><span class="w"> </span><span class="o">[</span><span class="n">::</span><span class="o">]</span><span class="err">:</span><span class="mi">4317</span><span class="o">-</span><span class="mi">4318</span><span class="o">-&gt;</span><span class="mi">4317</span><span class="o">-</span><span class="mi">4318</span><span class="o">/</span><span class="n">tcp</span><span class="p">,</span><span class="w"> </span><span class="mi">55678</span><span class="o">-</span><span class="mi">55679</span><span class="o">/</span><span class="n">tcp</span><span class="w">                                                       </span><span class="n">opentelemetry</span><span class="o">-</span><span class="k">go</span><span class="o">-</span><span class="n">app</span><span class="o">-</span><span class="n">otel</span><span class="o">-</span><span class="n">collector</span><span class="o">-</span><span class="mi">1</span>
</code></pre></div>

<h3>Setup Application exposes data</h3>
<p>I will leave my repo here: <a href="https://github.com/BlackMetalz/otel-go-app-sample">https://github.com/BlackMetalz/otel-go-app-sample</a></p>
<ul>
<li>Example when you request to path: <code>/products</code>. It will connect to DB and some functions which i used to make "accident scenario"</li>
<li>Here is the explanation generated by AI:</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="k">When</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">access</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">path</span><span class="w"> </span><span class="n n-Quoted">`/products`</span><span class="p">,</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">following</span><span class="w"> </span><span class="n">flow</span><span class="w"> </span><span class="n">occurs</span><span class="o">:</span>

<span class="mf">1.</span><span class="w"> </span><span class="o">**</span><span class="n">Router</span><span class="w"> </span><span class="k">Set</span><span class="n">up</span><span class="o">**:</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n n-Quoted">`SetupRouter`</span><span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="n">configures</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">Gorilla</span><span class="w"> </span><span class="n">Mux</span><span class="w"> </span><span class="n">router</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">handle</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n n-Quoted">`/products`</span><span class="w"> </span><span class="n">endpoint</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n n-Quoted">`GetProductsHandler`</span><span class="w"> </span><span class="k">function</span><span class="p">.</span>

<span class="mf">2.</span><span class="w"> </span><span class="o">**</span><span class="n">Request</span><span class="w"> </span><span class="n">Handling</span><span class="o">**:</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n n-Quoted">`GetProductsHandler`</span><span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">invoked</span><span class="w"> </span><span class="k">when</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">request</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">made</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n n-Quoted">`/products`</span><span class="w"> </span><span class="n">endpoint</span><span class="p">.</span>

<span class="mf">3.</span><span class="w"> </span><span class="o">**</span><span class="n">Tracing</span><span class="o">**:</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">trace</span><span class="w"> </span><span class="n">span</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">started</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n n-Quoted">`GetProductsHandler`</span><span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="k">using</span><span class="w"> </span><span class="n">OpenTelemetry</span><span class="p">.</span>

<span class="mf">4.</span><span class="w"> </span><span class="o">**</span><span class="n">Request</span><span class="w"> </span><span class="k">Validation</span><span class="o">**:</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n n-Quoted">`validateRequest`</span><span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">called</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">simulate</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="k">validation</span><span class="w"> </span><span class="n">step</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">1000ms</span><span class="w"> </span><span class="n">delay</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="mi">20</span><span class="o">%</span><span class="w"> </span><span class="n">chance</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">failure</span><span class="p">.</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="k">If</span><span class="w"> </span><span class="k">validation</span><span class="w"> </span><span class="n">fails</span><span class="p">,</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="k">error</span><span class="w"> </span><span class="n">response</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">returned</span><span class="p">,</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">trace</span><span class="w"> </span><span class="n">span</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">annotated</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">error</span><span class="p">.</span>

<span class="mf">5.</span><span class="w"> </span><span class="o">**</span><span class="k">Database</span><span class="w"> </span><span class="k">Query</span><span class="o">**:</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n n-Quoted">`GetAllProducts`</span><span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">called</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="k">fetch</span><span class="w"> </span><span class="k">all</span><span class="w"> </span><span class="n">products</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">database</span><span class="p">.</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">trace</span><span class="w"> </span><span class="n">span</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">started</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n n-Quoted">`GetAllProducts`</span><span class="w"> </span><span class="k">function</span><span class="p">.</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="k">database</span><span class="w"> </span><span class="k">query</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">executed</span><span class="p">,</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">results</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">scanned</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">slice</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n n-Quoted">`Product`</span><span class="w"> </span><span class="n">structs</span><span class="p">.</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="k">If</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">database</span><span class="w"> </span><span class="k">query</span><span class="w"> </span><span class="n">fails</span><span class="p">,</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="k">error</span><span class="w"> </span><span class="n">response</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">returned</span><span class="p">,</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">trace</span><span class="w"> </span><span class="n">span</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">annotated</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">error</span><span class="p">.</span>

<span class="mf">6.</span><span class="w"> </span><span class="o">**</span><span class="n">Parallel</span><span class="w"> </span><span class="k">Slow</span><span class="w"> </span><span class="n">API</span><span class="w"> </span><span class="k">Call</span><span class="o">**:</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="n">goroutine</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">started</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="k">call</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n n-Quoted">`HandleSlowAPI`</span><span class="w"> </span><span class="k">function</span><span class="p">,</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">simulates</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="k">slow</span><span class="w"> </span><span class="n">API</span><span class="w"> </span><span class="n">response</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">1000ms</span><span class="w"> </span><span class="n">delay</span><span class="p">.</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">slow</span><span class="w"> </span><span class="n">API</span><span class="w"> </span><span class="k">call</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">sent</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="k">channel</span><span class="p">.</span>

<span class="mf">7.</span><span class="w"> </span><span class="o">**</span><span class="k">Data</span><span class="w"> </span><span class="n">Processing</span><span class="o">**:</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n n-Quoted">`processData`</span><span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">called</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">simulate</span><span class="w"> </span><span class="n">additional</span><span class="w"> </span><span class="n">processing</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">1500ms</span><span class="w"> </span><span class="n">delay</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="mi">30</span><span class="o">%</span><span class="w"> </span><span class="n">chance</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">failure</span><span class="p">.</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="k">If</span><span class="w"> </span><span class="k">data</span><span class="w"> </span><span class="n">processing</span><span class="w"> </span><span class="n">fails</span><span class="p">,</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="k">error</span><span class="w"> </span><span class="n">response</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">returned</span><span class="p">,</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">trace</span><span class="w"> </span><span class="n">span</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">annotated</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">error</span><span class="p">.</span>

<span class="mf">8.</span><span class="w"> </span><span class="o">**</span><span class="k">Wait</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="k">Slow</span><span class="w"> </span><span class="n">API</span><span class="w"> </span><span class="n">Result</span><span class="o">**:</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="k">handler</span><span class="w"> </span><span class="n">waits</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">slow</span><span class="w"> </span><span class="n">API</span><span class="w"> </span><span class="k">call</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">channel</span><span class="p">.</span>

<span class="mf">9.</span><span class="w"> </span><span class="o">**</span><span class="k">Prepare</span><span class="w"> </span><span class="n">Response</span><span class="o">**:</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="n n-Quoted">`Response`</span><span class="w"> </span><span class="n">struct</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">created</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">combine</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">products</span><span class="p">,</span><span class="w"> </span><span class="k">slow</span><span class="w"> </span><span class="n">API</span><span class="w"> </span><span class="k">status</span><span class="p">,</span><span class="w"> </span><span class="k">slow</span><span class="w"> </span><span class="n">API</span><span class="w"> </span><span class="n">message</span><span class="p">,</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">processing</span><span class="w"> </span><span class="k">status</span><span class="p">.</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">response</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">encoded</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="kt">JSON</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">sent</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">client</span><span class="p">.</span>

<span class="mf">10.</span><span class="w"> </span><span class="o">**</span><span class="k">End</span><span class="w"> </span><span class="n">Trace</span><span class="o">**:</span>
<span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">trace</span><span class="w"> </span><span class="n">span</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n n-Quoted">`GetProductsHandler`</span><span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">ended</span><span class="p">.</span>

<span class="n">This</span><span class="w"> </span><span class="n">flow</span><span class="w"> </span><span class="n">ensures</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n n-Quoted">`/products`</span><span class="w"> </span><span class="n">endpoint</span><span class="w"> </span><span class="n">handles</span><span class="w"> </span><span class="n">request</span><span class="w"> </span><span class="k">validation</span><span class="p">,</span><span class="w"> </span><span class="k">database</span><span class="w"> </span><span class="n">querying</span><span class="p">,</span><span class="w"> </span><span class="k">slow</span><span class="w"> </span><span class="n">API</span><span class="w"> </span><span class="n">calls</span><span class="p">,</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="k">data</span><span class="w"> </span><span class="n">processing</span><span class="p">,</span><span class="w"> </span><span class="k">all</span><span class="w"> </span><span class="k">while</span><span class="w"> </span><span class="n">being</span><span class="w"> </span><span class="n">traced</span><span class="w"> </span><span class="k">using</span><span class="w"> </span><span class="n">OpenTelemetry</span><span class="p">.</span>
</code></pre></div>

<ul>
<li>Output example:</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;products&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;table&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;quantity&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">500</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;price&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;wardrobe&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;quantity&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;price&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">500</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Pens&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;quantity&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;price&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">],</span>
<span class="w">  </span><span class="nt">&quot;slow_status&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;slow_message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Slow API response at 2025-03-03T09:22:34+07:00\n&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;process_status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;success&quot;</span>
<span class="p">}</span>
</code></pre></div>

<h3>View the traces with Jaeger UI</h3>
<ul>
<li>Let's take a look at UI to see how many spans and each span take how long for duration. First, i filter for Min Duration as 2 seconds, which means request have more than 2 seconds to respond.</li>
</ul>
<p><img alt="filter jaeger" src="images/2025/03/03rd_2.png"></p>
<ul>
<li>
<p>Then i take a look at the request with 3 seconds duration. You can see clearly each span takes how long to complete the handle
<img alt="alt text" src="images/2025/03/03rd_3.png"></p>
</li>
<li>
<p>I will look at span <code>processData</code>
<img alt="alt text" src="images/2025/03/03rd_4.png">
Source code here: <a href="https://github.com/BlackMetalz/otel-go-app-sample/blob/main/utils/mysql.go#L112-L124">https://github.com/BlackMetalz/otel-go-app-sample/blob/main/utils/mysql.go#L112-L124</a></p>
</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="c1">// processData simulates additional processing with a delay and possible error</span>
<span class="kd">func</span><span class="w"> </span><span class="nx">processData</span><span class="p">(</span><span class="nx">ctx</span><span class="w"> </span><span class="nx">context</span><span class="p">.</span><span class="nx">Context</span><span class="p">,</span><span class="w"> </span><span class="nx">products</span><span class="w"> </span><span class="p">[]</span><span class="nx">Product</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="kt">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">_</span><span class="p">,</span><span class="w"> </span><span class="nx">span</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">otel</span><span class="p">.</span><span class="nx">Tracer</span><span class="p">(</span><span class="s">&quot;utils&quot;</span><span class="p">).</span><span class="nx">Start</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;processData&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="k">defer</span><span class="w"> </span><span class="nx">span</span><span class="p">.</span><span class="nx">End</span><span class="p">()</span>

<span class="w">    </span><span class="nx">time</span><span class="p">.</span><span class="nx">Sleep</span><span class="p">(</span><span class="mi">1500</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">time</span><span class="p">.</span><span class="nx">Millisecond</span><span class="p">)</span><span class="w"> </span><span class="c1">// Medium delay</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">rand</span><span class="p">.</span><span class="nx">Float32</span><span class="p">()</span><span class="w"> </span><span class="p">&lt;</span><span class="w"> </span><span class="mf">0.3</span><span class="w"> </span><span class="p">{</span><span class="w">          </span><span class="c1">// 30% chance of failure</span>
<span class="w">        </span><span class="nx">span</span><span class="p">.</span><span class="nx">SetAttributes</span><span class="p">(</span><span class="nx">attribute</span><span class="p">.</span><span class="nx">String</span><span class="p">(</span><span class="s">&quot;error&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;processing failed&quot;</span><span class="p">))</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="s">&quot;failed&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Errorf</span><span class="p">(</span><span class="s">&quot;data processing failed&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="nx">span</span><span class="p">.</span><span class="nx">SetAttributes</span><span class="p">(</span><span class="nx">attribute</span><span class="p">.</span><span class="nx">Int</span><span class="p">(</span><span class="s">&quot;processed_count&quot;</span><span class="p">,</span><span class="w"> </span><span class="nb">len</span><span class="p">(</span><span class="nx">products</span><span class="p">)))</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="s">&quot;success&quot;</span><span class="p">,</span><span class="w"> </span><span class="kc">nil</span>
<span class="p">}</span>
</code></pre></div>

<p>That is where 1.5 duration comes from in package utils which is matched with <code>otel.scope.name</code></p>
<h1>Deployment</h1>
<p>Assume I'm gonna deploy my application to k8s. And before going into detail, i would tell a real story.</p>
<p>When Open Tracing (<a href="https://opentracing.io/">https://opentracing.io/</a> archived!) was introduced by Platform team in my company, the new technology looked promising, many Dev team tried it but gave up due to performance drop hard, which caused everyone left Open Tracing, only Platform team used till today.</p>
<p>So what's wrong? </p>
<ul>
<li>First, it comes from bad building architecture. The Platform team gave an endpoint only for Collector, which lead to resource, network bandwidth exhausted if everyone sending together. The result is collector is hang/freeze, no traces metric at all.</li>
<li>Second, a dev for backend reported that his backend services are only able to handle 20% requests after integrating tracing into his application.</li>
</ul>
<p>At that time, i know nothing or did not have enough knowledge to understand what is open tracing even i was attempted the agenda of Open Tracing xD. So some fate brings me back to open tracing which is Open Telemtry today after 3 years &lt;3. </p>
<p>What i would change to make OTel use-able?</p>
<ul>
<li>Run pod that contain sidecar container, here is example deployment manifest.</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="c1"># go-app-deployment.yaml</span>
<span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">apps/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Deployment</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">go-sample-app</span>
<span class="w">  </span><span class="nt">labels</span><span class="p">:</span>
<span class="w">    </span><span class="nt">app</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">go-sample-app</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">replicas</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">  </span><span class="nt">selector</span><span class="p">:</span>
<span class="w">    </span><span class="nt">matchLabels</span><span class="p">:</span>
<span class="w">      </span><span class="nt">app</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">go-sample-app</span>
<span class="w">  </span><span class="nt">template</span><span class="p">:</span>
<span class="w">    </span><span class="nt">metadata</span><span class="p">:</span>
<span class="w">      </span><span class="nt">labels</span><span class="p">:</span>
<span class="w">        </span><span class="nt">app</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">go-sample-app</span>
<span class="w">    </span><span class="nt">spec</span><span class="p">:</span>
<span class="w">      </span><span class="nt">containers</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">sample-app</span>
<span class="w">        </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">go-sample-app:latest</span><span class="w">  </span><span class="c1"># Replace with your image</span>
<span class="w">        </span><span class="nt">ports</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">containerPort</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8080</span>
<span class="w">        </span><span class="nt">env</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">OTEL_COLLECTOR_URL</span>
<span class="w">          </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;localhost:4317&quot;</span><span class="w">  </span><span class="c1"># Points to the sidecar collector</span>
<span class="w">        </span><span class="nt">resources</span><span class="p">:</span>
<span class="w">          </span><span class="nt">limits</span><span class="p">:</span>
<span class="w">            </span><span class="nt">cpu</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;0.5&quot;</span>
<span class="w">            </span><span class="nt">memory</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;512Mi&quot;</span>
<span class="w">          </span><span class="nt">requests</span><span class="p">:</span>
<span class="w">            </span><span class="nt">cpu</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;0.1&quot;</span>
<span class="w">            </span><span class="nt">memory</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;128Mi&quot;</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">otel-collector</span>
<span class="w">        </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">otel/opentelemetry-collector-contrib:latest</span>
<span class="w">        </span><span class="nt">ports</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">containerPort</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4317</span><span class="w">  </span><span class="c1"># OTLP gRPC</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">containerPort</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8888</span><span class="w">  </span><span class="c1"># Metrics endpoint</span>
<span class="w">        </span><span class="nt">volumeMounts</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">otel-collector-config</span>
<span class="w">          </span><span class="nt">mountPath</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/etc/otelcol-contrib/config.yaml</span>
<span class="w">          </span><span class="nt">subPath</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">config.yaml</span>
<span class="w">        </span><span class="nt">resources</span><span class="p">:</span>
<span class="w">          </span><span class="nt">limits</span><span class="p">:</span>
<span class="w">            </span><span class="nt">cpu</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;0.5&quot;</span>
<span class="w">            </span><span class="nt">memory</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;512Mi&quot;</span>
<span class="w">          </span><span class="nt">requests</span><span class="p">:</span>
<span class="w">            </span><span class="nt">cpu</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;0.1&quot;</span>
<span class="w">            </span><span class="nt">memory</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;256Mi&quot;</span>
<span class="w">      </span><span class="nt">volumes</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">otel-collector-config</span>
<span class="w">        </span><span class="nt">configMap</span><span class="p">:</span>
<span class="w">          </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">otel-collector-config</span>
</code></pre></div>

<h1>Other notes</h1>
<p>Record tracing never been easy on application that have large traffic.</p>
<ul>
<li><a href="https://static.googleusercontent.com/media/research.google.com/en//archive/papers/dapper-2010-1.pdf">Google may use 0.01 to 0.1% request for sampling rate?</a>. This is just my guess xD, btw start sampling with rate like 1%!</li>
<li>Offload Trace Processing to the OTel Collector: This is what i said about deploy OTel collector as sidecar containers</li>
<li>Minimize Span Attributes and Events: Limit custom attributes to essential data (e.g., user ID, error codes) and avoid logging verbose payloads. Logging only required for tracing, not like show full debug low &gt;.&gt;</li>
<li>Batch Traces Before Exporting: Sending traces individually increases network I/O. Batching reduces this overhead</li>
<li>Instrument Only Critical Paths: Only tracing what is important ( API, logic and bottleneck), avoid add trace everywhere!</li>
<li>Monitor and Tune Overhead: Please monitor CPU/Mem/Network usage of tracing and adjust/tweak sampling/export settings!</li>
</ul>
<h1>Conclusion</h1>
<ul>
<li>Code/ some context is mostly generated by AI with my promt since I'm not developer, just a system guy want to learn Go xD</li>
<li>Personally, i don't think OTel is good approach for junior developer, expect use from middle developer!</li>
<li>Again, i only understand little about tracing, you will not see part Metrics and Logging of OTel in this article.</li>
</ul>
<h1>Ref:</h1>
<ul>
<li><a href="https://opentelemetry.io/docs/">https://opentelemetry.io/docs/</a></li>
<li><a href="https://learn.datadoghq.com/courses/introduction-to-observability">https://learn.datadoghq.com/courses/introduction-to-observability</a></li>
<li><a href="https://opentelemetry.io/docs/concepts/sampling/">https://opentelemetry.io/docs/concepts/sampling/</a></li>
<li>[https://static.googleusercontent.com/media/research.google.com/en//archive/papers/dapper-2010-1.pdf][https://static.googleusercontent.com/media/research.google.com/en//archive/papers/dapper-2010-1.pdf]</li>
</ul>


             
 
            
            
            







            <hr/>
        </div>
        <section id="article-sidebar" class="span2">
            <h4>Published</h4>
            <time itemprop="dateCreated" datetime="2025-03-03T00:00:00+07:00">Mon 03 March 2025</time>
            <h4>Category</h4>
            <a class="category-link" href="/categories.html#knowledge-base-ref">Knowledge Base</a>
            <h4>Tags</h4>
            <ul class="list-of-tags tags-in-article">
                <li><a href="/tags.html#observability-ref">observability
                    <span class="superscript">1</span>
</a></li>
            </ul>
<h4>Contact</h4>
<div id="sidebar-social-link">
</div>
            





            





        </section>
</div>
</article>
<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe.
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides.
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo https://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>                    </div>
                    <div class="span1"></div>
                </div>
            </div>
        </div>
<footer>




    <div id="fpowered">
        Powered by: <a href="http://getpelican.com/" title="Pelican Home Page" target="_blank" rel="nofollow noopener noreferrer">Pelican</a>
        Theme: <a href="https://elegant.oncrashreboot.com/" title="Theme Elegant Home Page" target="_blank" rel="nofollow noopener noreferrer">Elegant</a>
    </div>
</footer>            <script src="//code.jquery.com/jquery.min.js"></script>
        <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
        <script src="/theme/js/elegant.prod.9e9d5ce754.js"></script>
        <script>
            function validateForm(query)
            {
                return (query.length > 0);
            }
        </script>

    <script>
    (function () {
        if (window.location.hash.match(/^#comment-\d+$/)) {
            $('#comment_thread').collapse('show');
        }
    })();
    window.onhashchange=function(){
        if (window.location.hash.match(/^#comment-\d+$/))
            window.location.reload(true);
    }
    $('#comment_thread').on('shown', function () {
        var link = document.getElementById('comment-accordion-toggle');
        var old_innerHTML = link.innerHTML;
        $(link).fadeOut(200, function() {
            $(this).text('Click here to hide comments').fadeIn(200);
        });
        $('#comment_thread').on('hidden', function () {
            $(link).fadeOut(200, function() {
                $(this).text(old_innerHTML).fadeIn(200);
            });
        })
    })
</script>

    </body>
    <!-- Theme: Elegant built for Pelican
        License : MIT -->
</html>