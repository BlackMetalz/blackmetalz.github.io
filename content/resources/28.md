### Traffic Flow
```
graph TD
    A[Client Request] --> B[Ingress Gateway<br/>edge traffic]
    B --> C[VirtualService<br/>routing rules]
    C --> D[DestinationRule<br/>load balancing, TLS settings]
    B --> E[Service A<br/>with Envoy sidecar]
    E --> F[Service B<br/>with Envoy sidecar]
```

### Sidecar Mode (Traditional)
```
graph LR
    subgraph Pod
        App[App<br/>Container]
        Envoy[Envoy Sidecar<br/>Proxy]
        Envoy --> App
    end
```

### Ambient Mode (Sidecar-less)
```
graph TD
    subgraph Pods
        A[Pod A<br/>no sidecar]
        B[Pod B<br/>no sidecar]
        C[Pod C<br/>no sidecar]
    end
    
    A --> Z[ztunnel<br/>per node]
    B --> Z
    C --> Z
    
    Z --> W[Waypoint<br/>Proxy]
    
    Z -.- L4[L4 processing<br/>mTLS, basic routing]
    W -.- L7[L7 processing<br/>optional, per namespace/service]
```


### Resource Relationship
```
graph LR
    G[Gateway<br/>entry point] --> VS[VirtualService<br/>WHERE to route] --> DR[DestinationRule<br/>HOW to route]
    
    VS --> VSF[" - Host matching<br/> - URI matching<br/> - Header matching<br/> - Traffic splitting<br/> - Redirects/Rewrites"]
    
    DR --> DRF[" - Subsets versions<br/> - Load balancing<br/> - Connection pool<br/> - Outlier detection<br/> - TLS settings"]
```


### Scope Hierarchy
```
graph TD
    M[Mesh-wide<br/>MeshPolicy] --> N[Namespace-level]
    N --> W[Workload-level<br/>most specific wins]
```

### TRAFFIC MANAGEMENT
```
graph TD
    subgraph TRAFFIC_MANAGEMENT[TRAFFIC MANAGEMENT]
        G[Gateway<br/>entry point] --> VS[VirtualService<br/>routing rules] --> DR[DestinationRule<br/>traffic policy]
        
        VS --> VSF[" - host matching<br/> - URI matching<br/> - header matching<br/> - traffic split<br/> - fault injection"]
        
        DR --> DRF[" - subsets<br/> - load balancing<br/> - circuit breaker<br/> - connection pool<br/> - outlier detection"]
        
        SE[ServiceEntry] --> ES[External Services]
        WE[WorkloadEntry] --> VM[VMs / Non-K8s Workloads]
    end
```

### SECURITY
```
graph TD
    subgraph SECURITY[SECURITY]
        PA[PeerAuthentication<br/>STRICT/PERMISSIVE] --> MTLS[mTLS Settings<br/>server-side]
        MTLS --> MTLSF[" - mesh-wide<br/> - namespace<br/> - workload"]
        
        RA[RequestAuthentication<br/>issuer, jwksUri] --> JWT[JWT Validation<br/>token validation only]
        
        AP[AuthorizationPolicy<br/>ALLOW/DENY/CUSTOM] --> AC[Access Control]
        AC --> ACF[" - source who<br/> - operation what<br/> - condition when"]
    end
```

### Troubleshooting
```
graph LR
    subgraph TROUBLESHOOTING[TROUBLESHOOTING]
        A[istioctl analyze] --> A1[Configuration validation]
        B[istioctl proxy-status] --> B1[Sync status with control plane]
        C[istioctl proxy-config] --> C1[Envoy configuration]
        D[istioctl dashboard] --> D1[Observability tools]
    end
```